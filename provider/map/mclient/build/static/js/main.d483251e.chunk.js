(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(86),s=n.n(i),r=(n(98),n(5)),c=n(6),l=n(17),u=n(14),h=n(16),p=n(46),m=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"main-header"},o.a.createElement("a",{href:"",className:"logo"},o.a.createElement("span",{className:"logo-mini"},o.a.createElement("b",null,"Map")),o.a.createElement("span",{className:"logo-lg"},o.a.createElement("b",null,"Map"),"Provider")),o.a.createElement("nav",{className:"navbar navbar-static-top"},o.a.createElement("a",{href:"",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},o.a.createElement("span",{className:"sr-only"},"Toggle navigation"))))}}]),t}(a.Component),f=function(e){function t(e){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("aside",{className:"main-sidebar"},o.a.createElement("section",{className:"sidebar"},o.a.createElement("form",{action:"#",method:"get",className:"sidebar-form"},o.a.createElement("div",{className:"input-group"},o.a.createElement("input",{type:"text",name:"q",className:"form-control",placeholder:"Filter..."}),o.a.createElement("span",{className:"input-group-btn"},o.a.createElement("button",{type:"submit",name:"search",id:"search-btn",className:"btn btn-flat"},o.a.createElement("i",{className:"fa fa-search"}))))),o.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},o.a.createElement("li",{className:"header"},"Controls"),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.resetView()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"Reset View"),o.a.createElement("span",{className:"pull-right-container"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.showBus()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"Show Bus"),o.a.createElement("span",{className:"pull-right-container"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.showBusTrace()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"Show Bus Trace"),o.a.createElement("span",{className:"pull-right-container"}))),o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.props.showTaxi()}},o.a.createElement("i",{className:"fa fa-th"})," ",o.a.createElement("span",null,"Show Taxi"),o.a.createElement("span",{className:"pull-right-container"}))))))}}]),t}(a.Component),g=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={component:n.props.component,args:n.props.args},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"content-wrapper"},o.a.createElement(this.state.component,this.state.args,""))}}]),t}(a.Component),b=function(){function e(){Object(r.a)(this,e),console.log("New Message Store"),this.clear()}return Object(c.a)(e,[{key:"clear",value:function(){this.bus={},this.taxi={},this.busTrace={}}},{key:"addVehicle",value:function(e,t){void 0===e[t.id]&&(e[t.id]=[]),e[t.id].length>1e3&&e[t.id].pop(),e[t.id].unshift([t.lat,t.lon,t.angle,t.speed])}},{key:"addPosition",value:function(e){var t=JSON.parse(e);1==t.mtype?this.addVehicle(this.taxi,t):this.addVehicle(this.bus,t)}},{key:"getVehicle",value:function(e){return 1===e?this.taxi:this.bus}}]),e}(),d=n(1),v=n.n(d),E=n(130),O=n(129),y=n(131),k=n(91),j=n(20),w=n(85);!function(){var e=d.Marker.prototype._initIcon,t=d.Marker.prototype._setPos,n="msTransform"===d.DomUtil.TRANSFORM;d.Marker.addInitHook(function(){var e=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;e&&(e=e[0]+"px "+e[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||e||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(e){e.target._applyRotation()})}),d.Marker.include({_initIcon:function(){e.call(this)},_setPos:function(e){t.call(this,e),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[d.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,n?this._icon.style[d.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[d.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(e){return this.options.rotationAngle=e,this.update(),this},setRotationOrigin:function(e){return this.options.rotationOrigin=e,this.update(),this}})}();var A=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"createLeafletElement",value:function(e){var t=new d.Marker(e.position,this.getOptions(e));return this.contextValue=Object(k.a)({},e.leaflet,{popupContainer:t}),t}},{key:"updateLeafletElement",value:function(e,t){t.position!==e.position&&this.leafletElement.setLatLng(t.position),t.icon!==e.icon&&this.leafletElement.setIcon(t.icon),t.zIndexOffset!==e.zIndexOffset&&this.leafletElement.setZIndexOffset(t.zIndexOffset),t.opacity!==e.opacity&&this.leafletElement.setOpacity(t.opacity),t.draggable!==e.draggable&&(!0===t.draggable?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),t.rotationAngle!==e.rotationAngle&&this.leafletElement.setRotationAngle(t.rotationAngle),t.rotationOrigin!==e.rotationOrigin&&this.leafletElement.setRotationOrigin(t.rotationOrigin)}},{key:"render",value:function(){var e=this.props.children;return null==e||null==this.contextValue?null:o.a.createElement(j.a,{value:this.contextValue},e)}}]),t}(w.a),N=Object(j.b)(A),x=(v.a.icon({iconUrl:"img/car_above.png",iconSize:[16,32],iconAnchor:[8,16]}),v.a.icon({iconUrl:"img/car_above.png",iconSize:[32,64],iconAnchor:[16,32]})),S=(v.a.icon({iconUrl:"img/car_above.png",iconSize:[64,128],iconAnchor:[32,64]}),v.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[16,32],iconAnchor:[8,16]}),v.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[32,64],iconAnchor:[16,32]})),T=(v.a.icon({iconUrl:"img/bus_above_active.png",iconSize:[64,128],iconAnchor:[32,64]}),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).vehicleIcon=x,n.busIcon=S,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=[];if(this.props.taxi){var t=this.props.store.getVehicle(1);Object.keys(t).forEach(function(n){e.push(o.a.createElement(N,{position:[t[n][0][0],t[n][0][1]],icon:x,rotationOrigin:x.options.iconAnchor[0]+"px "+x.options.iconAnchor[1]+"px",rotationAngle:[t[n][0][2]]}))})}if(this.props.bus){var n=this.props.store.getVehicle(4);Object.keys(n).forEach(function(t){e.push(o.a.createElement(N,{position:[n[t][0][0],n[t][0][1]],icon:S,rotationOrigin:S.options.iconAnchor[0]+"px "+S.options.iconAnchor[1]+"px",rotationAngle:[n[t][0][2]]}))})}if(this.props.busTrace){var a=this.props.store.getVehicle(4);Object.keys(a).forEach(function(t){var n=a[t],i=[];n.forEach(function(e){i.push([e[0],e[1]])}),e.push(o.a.createElement(E.a,{positions:i}))})}var i=o.a.createElement("div",null);e.length>0&&(i=e);var s=o.a.createElement(O.a,{center:[34.8594,137.172],zoom:13},o.a.createElement(y.a,{url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),i);return o.a.createElement("section",{className:"content"},s)}}]),t}(a.Component)),_=n(90),R=n.n(_),M=function(e){function t(e){var n;Object(r.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e));var a=R()();return n.mstore=new b,n.state={store:n.mstore,bus:!0,busTrace:!0,taxi:!0},a.on("connect",function(){console.log("Socket.IO Connected!")}),a.on("event",n.getEvent.bind(Object(p.a)(Object(p.a)(n)))),a.on("disconnect",function(){console.log("Socket.IO Disconnected!")}),n.selComp=T,n.selArg={store:n.state.store,bus:n.state.bus,busTrace:n.state.busTrace,taxi:n.state.taxi},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getEvent",value:function(e){this.mstore.addPosition(e),this.setState({store:this.mstore})}},{key:"resetView",value:function(){this.setState({reset:!0}),this.selArg.reset=!0}},{key:"showBus",value:function(){this.setState({bus:!this.state.bus}),this.selArg.bus=this.state.bus}},{key:"showBusTrace",value:function(){this.setState({busTrace:!this.state.busTrace}),this.selArg.busTrace=this.state.busTrace}},{key:"showTaxi",value:function(){this.setState({taxi:!this.state.taxi}),this.selArg.taxi=this.state.taxi}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=o.a.createElement(m,null),n=o.a.createElement(g,{component:this.selComp,args:this.selArg}),a=o.a.createElement(f,{clearLogs:function(){return e.clearLogs()},showBus:function(){return e.showBus()},showBusTrace:function(){return e.showBusTrace()},showTaxi:function(){return e.showTaxi()},resetView:function(){return e.resetView()}});return o.a.createElement("div",null,t,a,n)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},93:function(e,t,n){e.exports=n(128)},98:function(e,t,n){}},[[93,2,1]]]);
//# sourceMappingURL=main.d483251e.chunk.js.map